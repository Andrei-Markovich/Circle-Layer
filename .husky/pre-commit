#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# 1) ?????????? ?????????? ??????? .env
if git diff --cached --name-only | grep -E '(^|/)\.env$' >/dev/null 2>&1; then
  echo "ERROR: .env is staged. Remove it before commit."
  exit 1
fi

# 2) ??????? ???????? ???????
npx hardhat compile || exit 1
npx hardhat test || exit 1